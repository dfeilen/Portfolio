<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Photo Scatter</title>
<style>
  body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #fafafa;
    font-family: 'Courier New', monospace;
  }

  #about-btn {
    position: fixed;
    top: 10px;
    right: 20px;
    background: transparent;
    border: none;
    font-size: 16px;
    cursor: pointer;
    z-index: 2000;
  }

  #about-btn:hover {
    text-decoration: underline;
  }

  .photo {
    position: absolute;
    cursor: grab;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    user-select: none;
  }

  .photo:active {
    cursor: grabbing;
  }

  .photo img {
    display: block;
    width: 100%;
    height: auto;
    border-radius: 6px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    transition: box-shadow 0.2s ease;
  }

  .photo:hover img {
    box-shadow: 0 6px 15px rgba(0,0,0,0.25);
  }

  .resize-handle {
    position: absolute;
    width: 12px;
    height: 12px;
    background: #000;
    opacity: 0;
    border-radius: 50%;
    cursor: nwse-resize;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease;
  }

  .photo:hover .resize-handle {
    opacity: 0.6;
  }

  #about-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(250, 250, 250, 0.95);
    z-index: 3000;
    padding: 40px;
    font-size: 16px;
  }

  #about-modal p {
    max-width: 600px;
    line-height: 1.6;
  }

  #close-about {
    position: absolute;
    top: 15px;
    right: 25px;
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body>

<button id="about-btn">about</button>

<div id="about-modal">
  <button id="close-about">Ã—</button>
  <p>Photo collage site featuring images from Portland's cycling scene. Click and drag to move photos. Resize them by grabbing the lower-right corner.</p>
</div>

<script>
const photos = [
  '/photos/photo1.jpg',
  '/photos/photo2.jpg',
  '/photos/photo3.jpg',
  '/photos/photo4.jpg',
  '/photos/photo5.jpg',
  '/photos/photo6.jpg'
];

function randomInRange(min, max) {
  return Math.random() * (max - min) + min;
}

function createPhoto(src) {
  const container = document.createElement('div');
  container.className = 'photo';
  container.style.width = randomInRange(window.innerWidth * 0.25, window.innerWidth * 0.4) + 'px';
  container.style.top = randomInRange(10, window.innerHeight * 0.5) + 'px';
  container.style.left = randomInRange(10, window.innerWidth * 0.5) + 'px';
  container.style.zIndex = Math.floor(Math.random() * 100);

  const img = document.createElement('img');
  img.src = src;
  container.appendChild(img);

  const handle = document.createElement('div');
  handle.className = 'resize-handle';
  container.appendChild(handle);

  document.body.appendChild(container);

  // --- Dragging ---
  let offsetX, offsetY, isDragging = false;

  container.addEventListener('pointerdown', e => {
    if (e.target === handle) return;
    isDragging = true;
    offsetX = e.clientX - container.offsetLeft;
    offsetY = e.clientY - container.offsetTop;
    container.style.zIndex = 1000;
    container.setPointerCapture(e.pointerId);
  });

  container.addEventListener('pointermove', e => {
    if (!isDragging) return;
    container.style.left = e.clientX - offsetX + 'px';
    container.style.top = e.clientY - offsetY + 'px';
  });

  container.addEventListener('pointerup', e => {
    isDragging = false;
    container.releasePointerCapture(e.pointerId);
  });

  // --- Resizing (keep aspect ratio) ---
  let isResizing = false, startX, startY, startWidth, startHeight, aspectRatio;

  handle.addEventListener('pointerdown', e => {
    e.stopPropagation();
    isResizing = true;
    startX = e.clientX;
    startY = e.clientY;
    startWidth = parseFloat(getComputedStyle(container).width);
    startHeight = parseFloat(getComputedStyle(container).height);
    aspectRatio = startWidth / startHeight;
    container.setPointerCapture(e.pointerId);
  });

  container.addEventListener('pointermove', e => {
    if (!isResizing) return;
    const dx = e.clientX - startX;
    let newWidth = startWidth + dx;
    let newHeight = newWidth / aspectRatio;
    if (newWidth > 100) {
      container.style.width = newWidth + 'px';
      container.style.height = newHeight + 'px';
    }
  });

  container.addEventListener('pointerup', e => {
    if (isResizing) {
      isResizing = false;
      container.releasePointerCapture(e.pointerId);
    }
  });
}

window.onload = () => {
  photos.forEach(src => createPhoto(src));

  const aboutBtn = document.getElementById('about-btn');
  const modal = document.getElementById('about-modal');
  const closeBtn = document.getElementById('close-about');

  aboutBtn.addEventListener('click', () => modal.style.display = 'block');
  closeBtn.addEventListener('click', () => modal.style.display = 'none');
};
</script>
</body>
</html>
